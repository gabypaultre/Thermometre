/**
 ***********************************************************************************************************************
 * Company: Esme Sudria
 * Project: Projet Esme
 *
 ***********************************************************************************************************************
 * @file      AppManager.c
 *
 * @author    gpaultre
 * @date      14/11/2024
 *
 * @version   0.0.0
 *
 * @brief     <you can add a description of your module here, otherwise please delete this line>
 * @details   <you can add more details of your module here, otherwise please delete this line>
 *
 * @remark    Coding Language: C
 *
 * @copyright Copyright (c) 2024 This software is used for education proposal
 *
 ***********************************************************************************************************************
 */

/**********************************************************************************************************************/
/* INCLUDE FILES                                                                                                      */
/**********************************************************************************************************************/

#include "AppManager.h"
#include "GPIO.h"
#include "Common.h"

/**********************************************************************************************************************/
/* CONSTANTS, MACROS                                                                                                  */
/**********************************************************************************************************************/

/**********************************************************************************************************************/
/* TYPES                                                                                                              */
/**********************************************************************************************************************/

/**********************************************************************************************************************/
/* PRIVATE VARIABLES                                                                                                  */
/**********************************************************************************************************************/

/**********************************************************************************************************************/
/* PRIVATE FUNCTION PROTOTYPES                                                                                        */
/**********************************************************************************************************************/

static bool AppManager_handleInterrupt(ISR_tenuPeripheral peripheralId); //void AppManager_handleInterrupt(ISR_tenuPeripheral peripheralId) recommended.

/**********************************************************************************************************************/
/* PRIVATE FUNCTION DEFINITIONS                                                                                       */
/**********************************************************************************************************************/

static bool AppManager_handleInterrupt(ISR_tenuPeripheral peripheralId)
{
    if (peripheralId == ISR_ePERIPHERAL_INPUT_GPIO)
    {
        static bool ledState = false;

        CMN_systemPrintf("Button Pressed!\r\n");

        if (ledState)
        {
            GPIO_setGpioLow();
        }
        else
        {
            GPIO_setGpioHigh();
        }
        ledState = !ledState;

        // return; recommended

        return true;
    }
    return false;
}

/**********************************************************************************************************************/
/* PUBLIC FUNCTION DEFINITIONS                                                                                        */
/**********************************************************************************************************************/

AppManager_status AppManager_init(void)
{
    GPIO_registerCallback(AppManager_handleInterrupt);

    return APPMANAGER_OK;
}

/*--------------------------------------------------------------------------------------------------------------------*/
